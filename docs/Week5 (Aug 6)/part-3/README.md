# Week 5 Part 3

# Scale out your web server

Do you remember `/api/1.0/posts/search`? Letâ€™s hurt our server through DoS this API.

## Prerequisite

- Understand the differences between stress testing, load testing, and performance testing.
- Use RDS (Why?)
- Disable rate limiter (Why?)
- Prepare the data generator.

## Task: Stress Testing

1. Use the data generator to generate 5000 posts.
2. Use testing tool [k6](https://k6.io/docs/) to test API `/api/1.0/posts/search`.

```js
// k6 run script.js

import http from 'k6/http';
import { check, sleep } from 'k6';
export const options = {
  discardResponseBodies: true,
  scenarios: {
    contacts: {
      executor: 'constant-arrival-rate',
      rate: 40,
      timeUnit: '1s',
      duration: '20s',
      preAllocatedVUs: 50,
      maxVUs: 100,
    },
  },
};
// test HTTP
export default function () {
  const res = http.get('http://{your url}/api/1.0/posts/search');
  check(res, { 'status was 200': (r) => r.status == 200 });
  sleep(1);
}
```

3. Record the `med` of `http_req_duration` time.
4. Use the data generator to generate more posts incrementally (e.g. 5000 more posts at a time), and observe when the `mid` of `http_req_duration` **exceeds 1 second**.

Note: You could observe CPU usage by `htop` command  
Note: other testing tools: Artillery, ApacheBench, Jmeter, wrk, ...

## Discussion
1. In addition to stress testing, what other types of tests can K6 perform during load testing, and in what scenarios are they used?
2. How to interpret the results generated by k6?